(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{117:function(e,t){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},148:function(e,t){},17:function(e,t,a){e.exports={doubleBlueTick:"MsgStatus_doubleBlueTick__3A1lY",doubleTick:"MsgStatus_doubleTick__kK2bX",singleTick:"MsgStatus_singleTick__3yxxg",pending:"MsgStatus_pending__2y4Pj"}},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(69),o=a.n(c),l=(a(79),a(4)),r=a(3),i=a.n(r),m=(a(96),a(70));var d={production:!0,server:"https://whatsapp-jfqs.onrender.com",local:"http://localhost:3000"};const u=d.production?d.server:d.local;var p=a.n(m)()(u),f=a(71),g=a.n(f);function E(e){return Object(s.useEffect)(()=>{p.emit("joinRoom",e.email),p.on("msgFromServer",t=>{console.log(t);let a=JSON.parse(JSON.stringify(e.roomsMessagesRef.current));a[t.roomId].list.push(t.msgData),e.setRoomsMessages(a);const s=JSON.parse(JSON.stringify(e.newMSGCountRef.current));console.log("modifiedNewMsgCount",s),s[t.roomId]++,e.setNewMSGCount(s),p.emit("msgStatusToServer",{roomId:t.roomId,senderId:t.msgData.senderId,type:"received",timestamp:Date.now()})}),p.on("newChat",t=>{console.log(t),p.emit("joinRoom",t.contact._id),e.setContacts(e.contactsRef.current.concat(t.contact));let a=JSON.parse(JSON.stringify(e.roomsMessagesRef.current));a[t.contact._id]={},a[t.contact._id].list=[t.contact.lastMessageData],e.setRoomsMessages(a)}),p.on("msgStatus",t=>{const a=JSON.parse(JSON.stringify(e.roomsMessagesRef.current));a[t.roomId]&&(a[t.roomId][t.type]=t.timestamp,e.setRoomsMessages(a))}),console.log("socket connection established")},[]),Object(s.useEffect)(()=>{e._id&&p.emit("joinRoom",e._id)},[e._id]),n.a.createElement("div",{className:g.a.socketMSG},"Socket Connected..")}a(120),a(121);function h(e){const t={transition:"0s",transform:"scale(1)",opacity:1},a={transform:"scale(10)",opacity:0,transition:"1s"},[c,o]=Object(s.useState)(a);return Object(s.useEffect)(()=>{((e,t)=>{let a=!0;for(let s in e)a&=e[s]===t[s];return a})(c,t)&&setTimeout(()=>{o(a)},0)},[c]),Object(s.useEffect)(()=>{e.clicked&&(o(t),e.setClicked(!1))},[e.clicked]),n.a.createElement("div",{className:"circularClickAnimationContainer"},n.a.createElement("div",{className:"circularBody",style:c}))}function v(e){const[t,a]=Object(s.useState)(!1),[c,o]=Object(s.useState)(!1),[l,r]=Object(s.useState)(!1),[m,d]=Object(s.useState)(!1),u=Object(s.useRef)();let p={marginLeft:e.marginLeft+"%"},f={transform:"translate(0px,".concat(e.y,"px)")};return Object(s.useEffect)(()=>{a(!0),e.setHeaderRefInApp(u)},[]),Object(s.useEffect)(()=>{e.accessJWTTokken&&(i.a.defaults.withCredentials=!0,i.a.defaults.headers.common.Authorization="bearer "+e.accessJWTTokken)},[e.accessJWTTokken]),n.a.createElement("div",null,n.a.createElement("div",{className:"header",style:f,ref:u},n.a.createElement("div",{className:"menu"},n.a.createElement("div",{className:"brandName"},"WhatsApp"),n.a.createElement("div",null,n.a.createElement("i",{className:"icon-search"})),n.a.createElement("div",{onClick:()=>{t&&e.openMenu(!0)}},n.a.createElement("i",{className:"vertical-menu"}))),n.a.createElement("div",{className:"options"},n.a.createElement("div",null,n.a.createElement("i",{className:"icon-camera"})),n.a.createElement("div",{onClick:()=>{e.scrollTo(0),o(!0)}},"CHATS",n.a.createElement(h,{clicked:c,setClicked:e=>o(e)})),n.a.createElement("div",{onClick:()=>{e.scrollTo(1),r(!0)}},"STATUS",n.a.createElement(h,{clicked:l,setClicked:e=>r(e)})),n.a.createElement("div",{onClick:()=>{e.scrollTo(2),d(!0)}},"CALLS",n.a.createElement(h,{clicked:m,setClicked:e=>d(e)}))),n.a.createElement("span",{className:"indicator",style:p})))}function b(){return n.a.createElement("div",{style:{height:"calc(100vh - 50px)",background:"pink",scrollSnapAlign:"start",scrollSnapStop:"always",paddingTop:"60px"}})}function w(){return n.a.createElement("div",{style:{height:"calc(100vh - 50px)",background:"orange",scrollSnapAlign:"start",scrollSnapStop:"always",paddingTop:"60px"}})}var k,R,O=a(13);a(122),a(123);function j(){return(j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const S=e=>{let{svgRef:t,title:a,...s}=e;return n.a.createElement("svg",j({viewBox:"0 0 212 212",width:212,height:212,ref:t},s),a?n.a.createElement("title",null,a):null,k||(k=n.a.createElement("path",{fill:"#DFE5E7",className:"background",d:"M106.251.5C164.653.5 212 47.846 212 106.25S164.653 212 106.25 212C47.846 212 .5 164.654.5 106.25S47.846.5 106.251.5z"})),R||(R=n.a.createElement("path",{fill:"#FFF",className:"primary",d:"M173.561 171.615a62.767 62.767 0 0 0-2.065-2.955 67.7 67.7 0 0 0-2.608-3.299 70.112 70.112 0 0 0-3.184-3.527 71.097 71.097 0 0 0-5.924-5.47 72.458 72.458 0 0 0-10.204-7.026 75.2 75.2 0 0 0-5.98-3.055c-.062-.028-.118-.059-.18-.087-9.792-4.44-22.106-7.529-37.416-7.529s-27.624 3.089-37.416 7.529c-.338.153-.653.318-.985.474a75.37 75.37 0 0 0-6.229 3.298 72.589 72.589 0 0 0-9.15 6.395 71.243 71.243 0 0 0-5.924 5.47 70.064 70.064 0 0 0-3.184 3.527 67.142 67.142 0 0 0-2.609 3.299 63.292 63.292 0 0 0-2.065 2.955 56.33 56.33 0 0 0-1.447 2.324c-.033.056-.073.119-.104.174a47.92 47.92 0 0 0-1.07 1.926c-.559 1.068-.818 1.678-.818 1.678v.398c18.285 17.927 43.322 28.985 70.945 28.985 27.678 0 52.761-11.103 71.055-29.095v-.289s-.619-1.45-1.992-3.778a58.346 58.346 0 0 0-1.446-2.322zM106.002 125.5c2.645 0 5.212-.253 7.68-.737a38.272 38.272 0 0 0 3.624-.896 37.124 37.124 0 0 0 5.12-1.958 36.307 36.307 0 0 0 6.15-3.67 35.923 35.923 0 0 0 9.489-10.48 36.558 36.558 0 0 0 2.422-4.84 37.051 37.051 0 0 0 1.716-5.25c.299-1.208.542-2.443.725-3.701.275-1.887.417-3.827.417-5.811s-.142-3.925-.417-5.811a38.734 38.734 0 0 0-1.215-5.494 36.68 36.68 0 0 0-3.648-8.298 35.923 35.923 0 0 0-9.489-10.48 36.347 36.347 0 0 0-6.15-3.67 37.124 37.124 0 0 0-5.12-1.958 37.67 37.67 0 0 0-3.624-.896 39.875 39.875 0 0 0-7.68-.737c-21.162 0-37.345 16.183-37.345 37.345 0 21.159 16.183 37.342 37.345 37.342z"})))},C=n.a.forwardRef((e,t)=>n.a.createElement(S,j({svgRef:t},e)));a.p;function N(){return n.a.createElement("div",{className:"bgStyle"},n.a.createElement(C,null))}var y=e=>{const t=(Date.now()-new Date(e).getTime())/864e4;if(t>=2){let t=new Date(e).getDate();t=t/10>=1?t:"0"+t;let a=new Date(e).getMonth();a=a/10>=1?a:"0"+a;const s=JSON.stringify(new Date(e).getFullYear()).slice(0,2);return"".concat(t,"/").concat(a,"/").concat(s)}if(t>=1)return"Yesterday";{let t=new Date(e).getHours();const a=t/12<1?"am":"pm";t=t%13?t%13:1,t=t/10>=1?t:"0"+t;let s=new Date(e).getMinutes();return s=s/10>=1?s:"0"+s,t+":"+s+" "+a}},M=a(21),D=a.n(M),T=a(17),_=a.n(T);function I(e){return n.a.createElement(n.a.Fragment,null,new Date(e.msgTimestamp).getTime()<=new Date(e.seen).getTime()?n.a.createElement("div",{className:_.a.doubleBlueTick}):new Date(e.msgTimestamp).getTime()<=new Date(e.received).getTime()?n.a.createElement("div",{className:_.a.doubleTick}):new Date(e.msgTimestamp).getTime()<=new Date(e.sent).getTime()?n.a.createElement("div",{className:_.a.singleTick}):n.a.createElement("div",{className:_.a.pending}))}function W(e){const[t,a]=Object(s.useState)(void 0),[c,o]=Object(s.useState)(void 0),[l,r]=Object(s.useState)(!1);return Object(s.useEffect)(()=>{e.date&&o(y(e.date))}),n.a.createElement("div",{className:"ChatContainer"},n.a.createElement(N,null),n.a.createElement(O.a,null,n.a.createElement(O.b,{to:"/whatsapp-look-alike/"+e.name.replace(new RegExp(" ","g"),"-"),onClick:()=>{e.setselectedRoomRecipientData({_id:e.recipientId,name:e.name,email:e.email}),e.setSelectedRoom_id(e.roomId),r(!0)}},n.a.createElement("div",null,n.a.createElement("div",{className:"name"},e.name),n.a.createElement("div",{className:["date",e.newMSGCount?"newMSGColor":null].join(" ")},c)),n.a.createElement("div",null,n.a.createElement("div",{className:"lastMessage"},e.userData._id==e.senderId?n.a.createElement(I,{seen:e.seen,received:e.received,sent:e.sent,msgTimestamp:e.date,newMSGCount:e.newMSGCount}):null,n.a.createElement("span",{style:{paddingLeft:"5px"}},e.lastMessage.replace(/<\/*div>/g," "))),n.a.createElement("div",{className:"tag"},e.newMSGCount?n.a.createElement("div",{className:"newMSG"},e.newMSGCount):null)))),n.a.createElement(h,{clicked:l,setClicked:e=>r(e)}))}a(170);function x(e){const[t,a]=Object(s.useState)([]),c=Object(s.useRef)();return Object(s.useEffect)(()=>{e.setchatsRef(c),console.log("from chats",e.roomsMessages)},[]),Object(s.useEffect)(()=>{e.contacts.length&&Object.keys(e.contacts[0].lastMessageData).length&&a(e.contacts.sort((e,t)=>new Date(e.lastMessageData.timestamp).getTime()<new Date(t.lastMessageData.timestamp).getTime()?1:-1))},[e.contacts]),n.a.createElement("div",{ref:c,className:"chatsContainer"},t.map((t,a)=>n.a.createElement(W,{key:a,roomId:t._id,recipientId:t.recipientId,name:t.name,email:t.email,date:t.lastMessageData.timestamp,lastMessage:t.lastMessageData.msg,setselectedRoomRecipientData:t=>e.setselectedRoomRecipientData(t),setSelectedRoom_id:t=>e.setSelectedRoom_id(t),seen:t.seen,received:t.received,sent:t.sent,userData:e.userData,senderId:t.lastMessageData.senderId,newMSGCount:t.newMSGCount})),n.a.createElement("div",null,"Tap and hold on chat for more option"))}a(171);function A(e){const t=Object(s.useRef)(),[a,c]=Object(s.useState)();return Object(s.useEffect)(()=>{e.shareRef(t),a&&e.setchatsRefForBody(a)},[e]),n.a.createElement("div",{className:"body",ref:t},n.a.createElement(x,{setchatsRef:e=>c(e),scrolled:e.scrolled,setselectedRoomRecipientData:t=>e.setselectedRoomRecipientData(t),setSelectedRoom_id:t=>e.setSelectedRoom_id(t),contacts:e.contacts,userData:e.userData}),n.a.createElement(w,null),n.a.createElement(b,null))}a(172);function J(e){const[t,a]=Object(s.useState)(!1),[c,o]=Object(s.useState)(""),l=(d.production?d.server:d.local)+"/logout";return Object(s.useEffect)(()=>{o(""),setTimeout(()=>{o(e.menuClass)},10)},[e.menuClass]),Object(s.useEffect)(()=>{a(!0),o("")},[]),n.a.createElement("div",{className:"menuContainer",onClick:()=>(t&&(o("menuCardFull menuCardFullHide"),setTimeout(()=>{o(""),a(!0),e.openMenu(!1)},295)),void a(!1))},n.a.createElement("div",{className:"menuCard "+c},n.a.createElement("div",{className:"MenuList"},n.a.createElement("span",null,"New group"),n.a.createElement("span",null,"New broadcast"),n.a.createElement("span",null,"WhatsApp web"),n.a.createElement("span",null,"Starred messages"),n.a.createElement("span",null,"Settings"),n.a.createElement("span",{onClick:e=>{e.stopPropagation(),console.log("logging out"),i.a.post(l,{},{withCredentials:!0}).then(e=>{console.log(e),window.location.reload()}).catch(e=>{console.log(e)})}},"Log out"))))}a(66);var P=a(73),G=a.n(P);function L(e){return n.a.createElement("div",{className:["msgBox ",e.obj.senderId===e.userData._id?"sent":"bot1"===e.obj.senderId?"bot1":"received",e.messageOwnerChanged?"marginTop":null].join(" ")},n.a.createElement("div",null,D()(e.obj.msg)),n.a.createElement("div",null,n.a.createElement("div",null,y(e.obj.timestamp)),e.obj.senderId==e.userData._id?n.a.createElement(I,{msgTimestamp:e.obj.timestamp,seen:e.seen,received:e.received,sent:e.sent}):null))}function z(e){const[t,a]=Object(s.useState)(100),[c,o]=Object(s.useState)(100),[l,r]=Object(s.useState)("60px"),[i,m]=Object(s.useState)(115),d=Object(s.useRef)(),u=Object(s.useRef)(),f=Object(s.useRef)(),g=Object(s.useRef)("");let E,h=!1;Object(s.useEffect)(()=>{console.log("props.selectedRoom_id",e.selectedRoom_id),e.selectedRoomRecipientData._id?(a(0),o(0)):(a(100),o(100))},[e.selectedRoomRecipientData]);const v=()=>{u.current&&u.current.scrollTo(0,u.current.scrollHeight)};Object(s.useEffect)(()=>{v()},[e.roomsMessagesRef.current,t,i]);return Object(s.useEffect)(()=>{e.selectedRoom_id&&e.selectedRoomRecipientData.email&&console.log("from room",e.roomsMessagesRef.current[e.selectedRoom_id].list.slice(-1)[0].senderId),e.selectedRoom_id&&e.roomsMessagesRef.current[e.selectedRoom_id].list.slice(-1)[0].senderId!=e.userData._id&&e.selectedRoomRecipientData.email&&p.emit("msgStatusToServer",{roomId:e.selectedRoom_id,senderEmail:e.selectedRoomRecipientData.email,type:"seen",timestamp:Date.now(),receiverId:e.userData._id})},[e.roomsMessagesRef.current,e.selectedRoom_id,e.selectedRoomRecipientData]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"room",style:{transform:"translate(".concat(t,"%,0px)"),gridTemplateRows:"55px auto ".concat(l)}},n.a.createElement("div",{className:"background-image"}),n.a.createElement("div",{className:"roomHeader"},n.a.createElement("div",{className:"back",onClick:()=>(e.setSelectedRoom_id(void 0),e.setselectedRoomRecipientData({}),void window.history.back())},n.a.createElement("i",{className:"return"})),n.a.createElement("div",{className:"picContainer"},n.a.createElement(N,null)),n.a.createElement("div",{className:"name"},e.selectedRoomRecipientData._id?e.selectedRoomRecipientData.name:null),n.a.createElement("div",{className:"videoCall"},n.a.createElement("i",{className:"video-call"})),n.a.createElement("div",{className:"audioCall"},n.a.createElement("i",{className:"call"})),n.a.createElement("div",{className:"menu-room"},n.a.createElement("i",{className:"vertical-menu"}))),n.a.createElement("div",{ref:u,className:"messages",style:{height:"calc(100vh - ".concat(i,"px)")}},e.selectedRoom_id?e.roomsMessagesRef.current[e.selectedRoom_id].list.map((t,a)=>(h=E!==t.senderId,E=t.senderId,n.a.createElement(L,{key:a,userData:e.userData,selectedRoom_id:e.selectedRoom_id,obj:t,messageOwnerChanged:h,seen:e.roomsMessagesRef.current[e.selectedRoom_id].seen,received:e.roomsMessagesRef.current[e.selectedRoom_id].received,sent:e.roomsMessagesRef.current[e.selectedRoom_id].sent}))):null)),n.a.createElement("div",{ref:d,className:"create",style:{transform:"translate(".concat(c,"%,0px)")}},n.a.createElement("div",{className:"chatInput"},n.a.createElement("div",{className:"emoji"},n.a.createElement("i",null)),n.a.createElement(G.a,{innerRef:f,className:"input",html:g.current,onChange:e=>{g.current=e.target.value,console.log(g.current,"inputHeight",l),r(d.current.clientHeight+15+"px"),m(d.current.clientHeight+70)},onFocus:()=>{setTimeout(()=>{v()},1e3)}}),n.a.createElement("div",{className:"attachment"},n.a.createElement("i",null)),n.a.createElement("div",{className:"camera"},n.a.createElement("i",null))),n.a.createElement("div",{className:"send",onClick:()=>(()=>{if(e.selectedRoom_id){let t={msg:g.current,senderId:e.userData._id,senderName:e.userData.name,timestamp:Date.now()};p.emit("msgToServer",{msgData:t,roomId:e.selectedRoom_id,receiverEmail:e.selectedRoomRecipientData.email,senderEmail:e.userData.email});let a=JSON.parse(JSON.stringify(e.roomsMessagesRef.current));a[e.selectedRoom_id].list.push(t),console.log("roomsMessages",a),e.setRoomsMessages(a),g.current="",m(115),v(),f.current.focus()}})()},n.a.createElement("i",null))))}var F;a(174);function H(e){let t={zIndex:e.blockStyle.zIndex,opacity:e.blockStyle.opacity};return n.a.createElement("div",{style:t,className:"block"})}function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const U=e=>{let{svgRef:t,title:a,...s}=e;return n.a.createElement("svg",B({viewBox:"0 0 24 24",width:24,height:24,ref:t},s),a?n.a.createElement("title",null,a):null,F||(F=n.a.createElement("path",{fill:"currentColor",d:"M19.005 3.175H4.674C3.642 3.175 3 3.789 3 4.821V21.02l3.544-3.514h12.461c1.033 0 2.064-1.06 2.064-2.093V4.821c-.001-1.032-1.032-1.646-2.064-1.646zm-4.989 9.869H7.041V11.1h6.975v1.944zm3-4H7.041V7.1h9.975v1.944z"})))},K=n.a.forwardRef((e,t)=>n.a.createElement(U,B({svgRef:t},e)));a.p,a(175);function V(e){return n.a.createElement(O.a,null,n.a.createElement(O.b,{to:"/whatsapp-look-alike/select-contact-for-chatting",className:"directAccess"},n.a.createElement(K,{className:"createChat",onClick:()=>e.setOpenAvailableChats(!0)})))}var $;a(176);function Y(){return(Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const q=e=>{let{svgRef:t,title:a,...s}=e;return n.a.createElement("svg",Y({viewBox:"0 0 32 32",width:32,height:32,ref:t},s),a?n.a.createElement("title",null,a):null,$||($=n.a.createElement("path",{fill:"currentColor",d:"M15.313 15.672c2.401 0 4.237-1.835 4.237-4.235S17.713 7.2 15.313 7.2s-4.235 1.836-4.235 4.237 1.834 4.235 4.235 4.235zm9.349-.64c1.571 0 2.773-1.201 2.773-2.772 0-1.571-1.202-2.773-2.773-2.773s-2.772 1.202-2.772 2.773c0 1.571 1.201 2.772 2.772 2.772zm-1.724 5.841a7.856 7.856 0 0 0-.889-1.107 8.074 8.074 0 0 0-1.825-1.413 9.05 9.05 0 0 0-.675-.346l-.021-.009c-1.107-.502-2.5-.851-4.232-.851-1.732 0-3.124.349-4.232.851l-.112.054a9.247 9.247 0 0 0-.705.374 8.137 8.137 0 0 0-1.705 1.341 7.991 7.991 0 0 0-.656.773 8.584 8.584 0 0 0-.233.334c-.063.095-.116.184-.164.263l-.012.02a4.495 4.495 0 0 0-.213.408v2.276h16.061v-2.276s-.07-.164-.225-.427a4.257 4.257 0 0 0-.162-.265zm1.724-4.357c-1.333 0-2.376.3-3.179.713a9.409 9.409 0 0 1 1.733 1.218c1.402 1.25 1.959 2.503 2.017 2.641l.021.049h4.954v-1.571s-1.294-3.05-5.546-3.05zM9.41 13.78H6.261v-3.152H4.344v3.152H1.2v1.918h3.144v3.145h1.917v-3.145H9.41V13.78z"})))},Q=n.a.forwardRef((e,t)=>n.a.createElement(q,Y({svgRef:t},e)));a.p;function X(e){const[t,a]=Object(s.useState)(!1);return n.a.createElement("div",{className:"savedContacts"},n.a.createElement("span",null,n.a.createElement(C,{className:"Person"})),n.a.createElement("div",{onClick:()=>{e.openChatRoom(e.obj._id),a(!0)}},n.a.createElement("span",null,e.obj.name),n.a.createElement("span",null,"whatever")),n.a.createElement(h,{clicked:t,setClicked:e=>a(e)}))}const Z=new class{constructor(e){if(window.Worker){console.log("Worker is supported in your browser");let t=e.toString();t=t.substring(t.indexOf("{")+1,t.lastIndexOf("}"));const a=new Blob([t],{type:"application/javascript"});return new Worker(URL.createObjectURL(a))}console.log("Worker is not supported in your browser")}}((function(){this.onmessage=e=>{console.log("roomsMessages ",e.data.modifiedRoomsMessages);let t={};for(const a in e.data.modifiedRoomsMessages){t[a]=0;let s=e.data.modifiedRoomsMessages[a].list.length;for(;e.data.modifiedRoomsMessages[a].list[--s].senderId!=e.data.userData._id&&new Date(e.data.modifiedRoomsMessages[a].list[s].timestamp).getTime()>=new Date(e.data.modifiedRoomsMessages[a].roomOpenedTimestamp).getTime();)t[a]++}this.postMessage(t)}}));function ee(e){const[t,a]=Object(s.useState)(!1),[c,o]=Object(s.useState)(void 0),[l,r]=Object(s.useState)(!1),[m,u]=Object(s.useState)([]),f=d.production?d.server+"/createRoom":"http://localhost:3000/createRoom",g=d.production?d.server+"/getContacts":"http://localhost:3000/getContacts",E=()=>{if(c){let t={};t.email=c,c!==e.email?i.a.post(f,t).then(t=>{if(e.reAuthorizationCheckAndConfig(t))return E(),null;if(t.data.roomCreated){console.log(t),o(void 0),r(!1),e.setContacts(e.contacts.concat(t.data.contact)),a=t.data.contact,u(m.concat(a).sort((e,t)=>e.name.toUpperCase()<t.name.toUpperCase()?1:-1));let s=JSON.parse(JSON.stringify(e.roomsMessages));return s[t.data.contact._id].list=[t.data.contact.lastMessageData],e.setRoomsMessages(s),p.emit("joinRoom",t.data.contact._id),null}var a;alert(t.data.msg),console.log(t.data.msg)}):(alert(c+" is your email"),o(void 0),r(!1))}else console.log("email is not defined"),r(!1)};Object(s.useEffect)(()=>{E()},[c]),Object(s.useEffect)(()=>{!c&&l&&o(prompt("Enter email to save contact"))},[l]);let v={transform:e.openAvailableChats?"translate(0px,0px)":"translate(100%,0px)"};Object(s.useEffect)(()=>{i.a.post(g).then(t=>{const{contacts:a,roomsMessages:s,userData:n}=t.data;console.log("get contacts",t),u(a.sort((e,t)=>e.name.toUpperCase()>t.name.toUpperCase()?1:-1));const c={};let o=a.map(e=>(c[e._id]={seen:e.seen,received:e.received,sent:e.sent,list:s[e._id]},e.lastMessageData=s[e._id][s[e._id].length-1],(!e.seen||e.lastMessageData.timestamp>e.seen)&&p.emit("msgStatusToServer",{roomId:e._id,senderEmail:e.email,type:"received",timestamp:Date.now()}),e));Z.postMessage({modifiedRoomsMessages:c,userData:n}),console.log("modifiedContacts",o),e.setContacts(o),e.setRoomsMessages(c),e.setUserData(t.data.userData),a.map(e=>{p.emit("joinRoom",e._id)})})},[]);return Object(s.useEffect)(()=>(Z.onmessage=t=>{console.log("from Worker : ",t.data),e.setNewMSGCount(t.data)},()=>{Z.removeListener("message")}),[]),n.a.createElement("div",{className:"room AvailableChats",style:v},n.a.createElement("div",{className:"menu"},n.a.createElement("div",{className:"s",onClick:()=>{window.history.back()}},n.a.createElement("i",{className:"return"})),n.a.createElement("div",{className:"a"},n.a.createElement("span",null,"Select contact"),n.a.createElement("span",null,m.length," contacts")),n.a.createElement("div",null,n.a.createElement("i",{className:"icon-search"})),n.a.createElement("div",null,n.a.createElement("i",{className:"vertical-menu"}))),n.a.createElement("div",{className:"contacts"},n.a.createElement("div",{className:"newGroup"},n.a.createElement("span",null,n.a.createElement(Q,{className:"AddGroup"})),n.a.createElement("p",null,"New Group")),n.a.createElement("div",{className:"newGroup",onClick:()=>{a(!0),r(!0)}},n.a.createElement("span",null,n.a.createElement(Q,{className:"AddGroup"})),n.a.createElement("p",null,"New Contact"),n.a.createElement(h,{clicked:t,setClicked:e=>a(e)})),m.map((e,t)=>n.a.createElement(X,{key:t,obj:e,openChatRoom:e=>{}}))))}a(177),a(67);function te(e){return n.a.createElement("div",{className:"WelcomePage"},n.a.createElement("h1",null,"Welcome to WhatsApp"),n.a.createElement("div",null,n.a.createElement("span",null)),n.a.createElement("p",null,"Read our ",n.a.createElement("span",null,"Privacy Policy"),'. Tap "Agree and continue" to accept the ',n.a.createElement("span",null,"Terms of Service"),"."),n.a.createElement("button",{onClick:()=>e.setAgreed(!0)},"AGREE AND CONTINUE"),n.a.createElement("footer",null,"from",n.a.createElement("span",null,"FACEBOOK")))}a(68);function ae(e){const[t,a]=Object(s.useState)(null),[c,o]=Object(s.useState)(!1),[l,r]=Object(s.useState)(!1),[m,u]=Object(s.useState)(!1),[p,f]=Object(s.useState)(void 0),[g,E]=Object(s.useState)(void 0),[h,v]=Object(s.useState)(void 0),b=Object(s.useRef)(),w=Object(s.useRef)(),k=Object(s.useRef)(),R=Object(s.useRef)(),O=(d.production?d.server:d.local)+"/requestMail",j=(d.production?d.server:d.local)+"/verifyOTP",S=(d.production?d.server:d.local)+"/login",C=e=>{"Enter"!==e.key&&13!==e.keyCode||N(e)},N=a=>{u(!0);let s={};s.to=t,c||l?c&&!l?(s.email=t,s.otp=p,i.a.post(j,s,{withCredentials:!0}).then(e=>{u(!1),e.data.verified&&r(!0)})):e.registered?(s.email=t,s.PWD=g,i.a.post(S,s,{withCredentials:!0}).then(a=>{a.data.logedIn?(e.setAccessJWTTokken(a.data.signedJWT),e.setEmail(t),e.setPWD("userPassword")):u(!1)}).catch(e=>{console.log(e),u(!1)})):g===h?(e.setEmail(t),e.setPWD(g)):u(!1):i.a.post(O,s,{withCredentials:!0}).then(t=>{u(!1),t.data.registered?(r(!0),e.setRegistered(!0)):t.data.OTPsent&&o(!0)})};return Object(s.useEffect)(()=>{c?(w.current.select(),w.current.focus()):l?(k.current.select(),k.current.focus()):(b.current.select(),b.current.focus())},[m,c,l]),n.a.createElement("div",{className:"EnterEmail"},n.a.createElement("h2",null,"Enter Your E-mail"),n.a.createElement("p",null,"WhatsApp will send an E-mail to verify your email. ",n.a.createElement("span",null,"What's my email?")),n.a.createElement("input",{ref:b,type:"email",placeholder:"email",onChange:e=>a(e.target.value),disabled:c||m||l,onKeyDown:C}),c?n.a.createElement("input",{ref:w,type:"number",placeholder:"enter OTP",onChange:e=>f(e.target.value),disabled:m||l,onKeyDown:C}):null,l?n.a.createElement("div",{className:"PWDContainer"},n.a.createElement("br",null),n.a.createElement("p",null,"Enter password"),n.a.createElement("input",{ref:k,type:"password",min:"6",placeholder:"password",onChange:e=>E(e.target.value),disabled:m,onKeyDown:C}),e.registered?null:n.a.createElement("input",{ref:R,type:"password",placeholder:"confirm password",onChange:e=>v(e.target.value),disabled:m,onKeyDown:C})):null,n.a.createElement("button",{onClick:N,disabled:m},"Next"))}a(178);function se(e){const[t,c]=Object(s.useState)(void 0),[o,l]=Object(s.useState)(!1),[r,m]=Object(s.useState)(!1),u=d.production?d.server+"/register":"http://localhost:3000/register",p=d.production?d.server+"/saveUserMetaData":"http://localhost:3000/saveUserMetaData",f=Object(s.useRef)();let g={};const E=()=>{i.a.post(p,{},{withCredentials:!0}).then(t=>{l(!1),t.data.saved?(e.setPWD("userPassword"),e.setRegistered(!0)):alert(t.data.msg+"try one more time")}).catch(e=>{l(!1),console.log(e),alert("error occured try again")})};return Object(s.useEffect)(()=>{f&&f.current.focus()},[]),n.a.createElement("div",{className:"EnterEmail EnterNameAndDp"},n.a.createElement("h2",null,"Profile info"),n.a.createElement("p",null,"Please provide your name and an optional profile photo"),n.a.createElement("div",{className:"imgContainer"},n.a.createElement("img",{className:"defaultImg",src:a(52),alt:"profile pic"})),n.a.createElement("input",{ref:f,disabled:o,type:"text",name:"name",onChange:e=>c(e.target.value)}),n.a.createElement("button",{onClick:()=>r?E():(l(!0),g.name=t,g.email=e.email,g.PWD=e.PWD,void i.a.post(u,g,{withCredentials:!0}).then(t=>{t.data.registered?(console.log("registered"),e.setAccessJWTTokken(t.data.signedJWT),i.a.defaults.headers.common.Authorization="bearer "+t.data.signedJWT,m(t.data.registered),E()):(l(!1),alert(t.data.msg),f.current.focus())}).catch(e=>{console.log(e),l(!1),alert("something went wrong try again"),f.current.focus()})),disabled:o},"Next"))}var ne=function(){const[e,t]=Object(s.useState)(null),[a,c]=Object(s.useState)(0),[o,r]=Object(s.useState)(10),[m,u]=Object(s.useState)(!1),[p,f]=Object(s.useState)("menuCard"),[g,h]=Object(s.useState)(),[b,w]=Object(s.useState)(0),[k,R]=Object(s.useState)(),[O,j]=Object(s.useState)(!1),[S,C]=Object(s.useState)(!1),[N,y]=Object(s.useState)(void 0),[M,D]=Object(s.useState)({}),[T,_]=Object(s.useState)(void 0),[I,W]=Object(s.useState)({}),[x,P]=Object(s.useState)(!1),[G,L]=Object(s.useState)(void 0),[F,B]=Object(s.useState)(void 0),[U,K]=Object(s.useState)([]),[$,Y]=Object(s.useState)([]),[q,Q]=Object(s.useState)({}),X=Object(s.useRef)(x),Z=Object(s.useRef)(M);let ne=Object(l.a)();const ce=Object(s.useRef)(e),oe=Object(s.useRef)(),le=Object(s.useRef)(),re=Object(s.useRef)(!1),ie=Object(s.useRef)(q),me=e=>{let t;ce.current.style.scrollSnapType="none",t&&clearInterval(t);let a=ce.current.scrollLeft;const s=e*ce.current.clientWidth-a,n=s/5;let o=0;ce.current&&(t=setInterval(()=>{a+=n,c(a),o+=n,Math.abs(o)>=Math.abs(s)&&(clearInterval(t),ce.current.style.scrollSnapType="x mandatory",ce.current.scrollLeft)},1))};return Object(s.useEffect)(()=>{if(ce.current){const e=Math.round(ce.current.scrollLeft),t=Math.round(document.documentElement.clientWidth),a=window.location.pathname,s=a.match("whatsapp-look-alike/chats");e!=t||a.match("status")?e!=2*t||a.match("calls")?0!=e||s||(console.log("chats"),ne.goBack()):(console.log("calls"),s?ne.push("/whatsapp-look-alike/calls"):ne.replace("/whatsapp-look-alike/calls")):(console.log("status"),s?ne.push("/whatsapp-look-alike/status"):ne.replace("/whatsapp-look-alike/status"))}},[o]),Object(s.useEffect)(()=>{e&&e.scrollTo(a,0)},[a,e]),Object(s.useEffect)(()=>(ce.current=e,e&&e.addEventListener("scroll",t=>{r(10+e.scrollLeft/e.scrollWidth*90)}),()=>{e&&e.removeEventListener("scroll")}),[e]),Object(s.useEffect)(()=>{f(m?"menuCardFull":" ")},[m]),Object(s.useEffect)(()=>{if(g&&k){let e,t,a=0;g.addEventListener("scroll",s=>{t&&clearTimeout(t),k.style.transition="0ms",e||(e=g.scrollTop),a+=e-g.scrollTop,a<-60?a=-60:a>0&&(a=0),w(a),t=setTimeout(()=>{k.style.transition="transform 300ms ease-in-out",a=a<-30&&g.scrollTop>60?-60:0,w(a)},300),e=g.scrollTop})}return()=>{g&&g.removeEventListener("scroll")}},[g,k]),Object(s.useEffect)(()=>{k&&e&&(M._id||x?(k.style.transform="translate(-100px,".concat(b,"px)"),e.style.transform="translate(-100px,0px)"):(k.style.transform="translate(0px,".concat(b,"px)"),e.style.transform="translate(0px,0px)"))},[M,x]),Object(s.useEffect)(()=>{ce.current&&!re.current&&(()=>{let e;re.current=!0,window.performance&&(console.info("window.performance works fine on this browser"),e=1==performance.navigation.type,console.log("reloaded ",e));const t=window.location.pathname;t.match(/whatsapp-look-alike\/*$/)?ne.replace("/whatsapp-look-alike/chats"):t.match(/whatsapp-look-alike\/status\/*$/)?(me(1),e||(ne.replace("/whatsapp-look-alike/chats"),ne.push("/whatsapp-look-alike/status"))):t.match(/whatsapp-look-alike\/calls\/*$/)?(me(2),e||(ne.replace("/whatsapp-look-alike/chats"),ne.push("/whatsapp-look-alike/calls"))):t.match(/whatsapp-look-alike\/select-contact-for-chatting\/*$/)?(P(!0),e||(ne.replace("/whatsapp-look-alike/chats"),ne.push("/whatsapp-look-alike/select-contact-for-chatting"))):(!t.match(/whatsapp-look-alike\/chats\/*$/)||t.match(/whatsapp-look-alike\/*/g).length>1)&&(e?ne.goBack():ne.replace("/whatsapp-look-alike/chats")),console.log("if page is loading continuosly than write the folowing path after url 'whatsapp-look-alike/chats'")})()},[ce.current]),Object(s.useEffect)(()=>{window.addEventListener("popstate",()=>{console.log(window.location.pathname);let e=!(X.current||Z.current._id);window.location.pathname.match("whatsapp-look-alike/chats")&&e&&me(0),D({}),P(!1)})},[]),Object(s.useEffect)(()=>{X.current=x,Z.current=M},[M,x]),Object(s.useEffect)(()=>{oe.current=$},[$]),Object(s.useEffect)(()=>{le.current=U},[U]),Object(s.useEffect)(()=>{(()=>{console.log("called for refresh token");const e=d.production?d.server+"/refreshToken":"http://localhost:3000/refreshToken";i.a.get(e,{withCredentials:!0}).then(e=>{console.log("called for refresh token"),e.data.logedIn?(console.log("logged in"),y(e.data.signedJWT),L(e.data.email),B("userPassword"),C(!0),j(!0)):alert(e.data.msg)}).catch(e=>[console.log(e+" login again")])})()},[]),Object(s.useEffect)(()=>{console.log($),K(U.map(e=>(e.lastMessageData=$[e._id].list[$[e._id].list.length-1],e.seen=$[e._id].seen,e.received=$[e._id].received,e.sent=$[e._id].sent,e)))},[$]),Object(s.useEffect)(()=>{ie.current=q,K(U.map(e=>{if(M._id==e.recipientId&&0!=e.newMSGCount){e.newMSGCount=0;const t=JSON.parse(JSON.stringify(ie.current));t[e._id]=0,Q(t)}else e.newMSGCount=ie.current[e._id];return e}))},[q]),Object(s.useEffect)(()=>{if(T&&Object.keys(ie.current).length){let e=JSON.parse(JSON.stringify(ie.current));e[T]=0,console.log("new message",e),Q(e)}},[T]),n.a.createElement("div",{className:"App"},O?n.a.createElement(n.a.Fragment,null,G&&F?n.a.createElement(n.a.Fragment,null,S&&N?null:n.a.createElement(se,{accessJWTTokken:N,setAccessJWTTokken:e=>y(e),setRegistered:e=>C(e),email:G,PWD:F,setPWD:e=>B(e)})):n.a.createElement(ae,{accessJWTTokken:N,setAccessJWTTokken:e=>y(e),registered:S,setRegistered:e=>C(e),setEmail:e=>L(e),setPWD:e=>B(e)})):n.a.createElement(te,{setAgreed:e=>j(e)}),S&&N?n.a.createElement(n.a.Fragment,null,n.a.createElement(E,{roomsMessagesRef:oe,setRoomsMessages:e=>Y(e),email:G,contactsRef:le,setContacts:e=>K(e),_id:I._id,newMSGCountRef:ie,setNewMSGCount:e=>Q(e)}),n.a.createElement(v,{setHeaderRefInApp:e=>R(e.current),scrollTo:me,marginLeft:o,openMenu:e=>u(e),y:b,accessJWTTokken:N}),n.a.createElement(A,{shareRef:e=>t(e.current),setchatsRefForBody:e=>h(e.current),scrolled:b,setselectedRoomRecipientData:e=>D(e),setSelectedRoom_id:e=>_(e),contacts:U,userData:I}),m?n.a.createElement(J,{openMenu:e=>u(e),menuClass:p}):null,n.a.createElement(V,{setOpenAvailableChats:e=>P(e)}),n.a.createElement(z,{userData:I,selectedRoomRecipientData:M,setselectedRoomRecipientData:e=>D(e),selectedRoom_id:T,setSelectedRoom_id:e=>_(e),roomsMessagesRef:oe,setRoomsMessages:e=>Y(e)}),n.a.createElement(ee,{openAvailableChats:x,setOpenAvailableChats:e=>P(e),email:G,reAuthorizationCheckAndConfig:e=>(e=>!0===e.data.logedIn?(y(e.data.signedJWT),!0):!1===e.data.logedIn&&(alert(e.data.msg),L(void 0),B(void 0),y(void 0),void C(!1)))(e),setContacts:e=>K(e),setRoomsMessages:e=>Y(e),setUserData:e=>W(e),contacts:U,roomsMessages:$,setNewMSGCount:e=>Q(e)}),n.a.createElement(H,{blockStyle:M._id||x?{zIndex:2,opacity:.6}:{zIndex:-2,opacity:0}})):null)};const ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ne,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/whatsapp-look-alike",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/whatsapp-look-alike","/service-worker.js");ce?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const s=a.headers.get("content-type");404===a.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):oe(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):oe(t,e)})}}()},52:function(e,t,a){e.exports=a.p+"static/media/person.a8f61b5a.svg"},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},71:function(e,t,a){e.exports={socketMSG:"SocketConnections_socketMSG__xpIQV"}},74:function(e,t,a){e.exports=a(179)},79:function(e,t,a){},96:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.8ef30a19.chunk.js.map